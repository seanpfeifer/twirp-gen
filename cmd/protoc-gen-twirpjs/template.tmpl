// Code generated by protoc-gen-twirpjs. DO NOT EDIT.

let host = "";

// setHost is useful if the API you're calling is not on the same host as your web server
export function setHost(newHost) {
	host = newHost;
}

function createRequest(url, body) {
	return new Request(host + url, {
		method: "POST",
		credentials: "same-origin",
		headers: {
			"Content-Type": "application/json",
		},
		body: JSON.stringify(body),
	});
}
{{range .Files}}{{range .Services}}{{range .Methods}}
{{.Comments.Leading}}export async function {{JSName .}}({{range $i, $v := .Input.Fields}}{{if $i}}, {{end}}{{$v.Desc.JSONName}}{{end}}) {
	const res = await fetch(createRequest("{{$.PathPrefix}}/{{.Desc.ParentFile.Package}}.{{.Parent.GoName}}/{{.GoName}}", { {{range $i, $v := .Input.Fields}}{{if $i}}, {{end}}"{{$v.Desc.JSONName}}": {{$v.Desc.JSONName}}{{end}} }));
	const jsonBody = await res.json();
	if (res.ok) {
		return jsonBody;
	}
	throw new Error(jsonBody.msg);
}
{{end}}{{end}}{{end}}
